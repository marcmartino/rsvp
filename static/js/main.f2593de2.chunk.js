(this.webpackJsonprsvp=this.webpackJsonprsvp||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},266:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var c=n(3),o=n.n(c),i=n(103),r=n.n(i),a=(n(116),n(61)),s=n(20);a.a.use(s.e).init({resources:{en:{translation:{"dashboard.updateWeddingRsvpButton":"Update Wedding RSVP ({{accepted}}accepted/{{declined}}declined)","dashboard.setWeddingRsvpButton":"RSVP to the wedding",welcome:"Welcome","loginPage.title":"Log In","loginPage.nameInput":"Name","loginPage.zipInput":"Zip Code","loginPage.submitButton":"Log In",userGreeting:"Welcome, {{name}}",coupleGreeting:"Welcome {{name}} and {{soName}}","welcome.date":"10.23.21","welcome.location":"Las Vegas, NV","welcome.line1":"Jenna (Jieun) &","welcome.line2":"Marc","welcome.enterButton":"RSVP",noInviteeFound:"Invitee not found- Please try again or reach out directly to Marc or Jenna",jsonParse:"Failed to parse api response"}},kr:{translation:{welcome:"\ud658\uc601\ud558\ub2e4"}}},fallbackLng:"en",interpolation:{escapeValue:!1}});a.a,n(117);var d=n(34),l=n(9),u=n(273),g=n(0),b=n(4),j=Object(g.c)([Object(g.c)([Object(g.h)({zip:g.g,weddingAccess:g.b,receptionAccess:g.b}),Object(g.h)({displayName:g.g,recordName:g.g,id:g.e}),Object(g.i)([Object(g.h)({}),Object(g.h)({familyName:g.g,familyNames:Object(g.a)(g.g),familyKey:g.g}),Object(g.h)({soName:g.g,familyKey:g.g})])]),Object(g.f)({weddingAcceptedCount:g.e,weddingDeclinedCount:g.e,receptionAcceptedCount:g.e,receptionDeclinedCount:g.e})]),h=Object(g.h)({acceptCount:g.e,declineCount:g.e,notes:g.g}),m=Object(g.f)({wedding:h,reception:Object(g.c)([Object(g.h)({foodPreferences:Object(g.a)(Object(g.i)([Object(g.d)("vegetarian"),Object(g.d)("pescetarian"),Object(g.d)("chicken"),Object(g.d)("beef")])),attendeeNames:Object(g.a)(g.g),childrenAttendingCount:g.e}),h])}),p=Object(g.h)({name:g.g,zip:g.g}),f=(Object(g.c)([m,p,Object(g.f)({familyName:g.g})]),"https://wrsvp-api.herokuapp.com/"),O={method:"POST",url:"".concat(f,"authorizeUser"),input:{name:"",zip:""},decoder:j},v=("".concat(f,"rsvp"),g.j,n(108)),x=n.n(v),y=n(109),w=n.n(y),C=n(110),S=n.n(C),N=n(111),I=n.n(N),P=n(2),k={square:{folderName:"square",itemCount:9},tall:{folderName:"3-2",itemCount:5},wide:{folderName:"4-3",itemCount:6}},z=function(e){return function(t){return Object(P.c)(t,(function(){return w()(1,e)}),x.a,S()(t))}},D="#8F5D5D",F="#3D405B",B="#F4F1DE",A=D,W="#F2CC8F",J=D,R=n(1),E=function(e){var t=e.onPress,n=e.label;return Object(R.jsx)("button",{onClick:t,style:{borderWidth:0,borderColor:W,backgroundColor:A,height:"8vh",width:"100%",color:B,fontSize:"1.5em",fontWeight:"bold",borderStyle:"solid"},children:n})},L=(n(266),n(274)),V=function(e){var t=e.onSubmit,n=e.submitting,o=e.error,i=Object(u.a)().t,r=Object(c.useState)({name:"",zip:""}),a=Object(l.a)(r,2),s=a[0],d=s.name,g=s.zip,b=a[1];return Object(R.jsx)("div",{children:Object(R.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:d,zip:g})},style:{display:"flex",height:"40vh",flexDirection:"column",justifyContent:"space-between"},children:[Object(R.jsx)("header",{children:Object(R.jsx)("h1",{style:{color:F},children:i("loginPage.title")})}),Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:Object(R.jsx)("input",{placeholder:i("loginPage.nameInput"),className:"inputField",type:"text",inputMode:"text",onChange:function(e){return b((function(t){return{zip:t.zip,name:e.target.value}}))}})}),Object(R.jsx)("div",{children:Object(R.jsx)("input",{placeholder:i("loginPage.zipInput"),className:"inputField",type:"text",pattern:"[0-9]*",inputMode:"numeric",onChange:function(e){return b((function(t){return{name:t.name,zip:e.target.value}}))}})})]}),o&&Object(R.jsx)("span",{style:{color:J,padding:"0 5vw"},children:o}),Object(R.jsxs)("button",{disabled:n||!d||!g,style:{backgroundColor:F,color:B},className:"loginButton",onClick:function(){return t({name:d,zip:g})},children:[i("loginPage.submitButton"),n&&Object(R.jsx)(L.a,{style:{marginLeft:7.5},size:25,color:B,thickness:3})]})]})})},M=function(e){var t=Object.assign({},e),n=Object(u.a)().t,o=Object(c.useState)(!1),i=Object(l.a)(o,2),r=i[0],a=i[1];Object(c.useEffect)((function(){fetch("https://wrsvp-api.herokuapp.com/")}),[]);var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return Object(P.c)(e,z(k[t].itemCount),I()((function(e){return"".concat("","/bgImages/").concat(k[t].folderName,"/").concat(e,".jpg")})))}}(2)("wide");return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"splashEnter",style:{backgroundColor:B},children:[Object(R.jsx)("div",{style:{height:"30vh",backgroundImage:"url('".concat(s[0],"')"),backgroundSize:"cover",backgroundPosition:"center"}}),r?Object(R.jsx)("div",{style:{height:"40vh"},children:Object(R.jsx)(V,Object(d.a)({},t))}):Object(R.jsxs)("a",{href:"#",onClick:function(){return a(!0)},style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",textDecoration:"none",color:F,backgroundColor:B,height:"40vh"},children:[Object(R.jsx)("div",{}),Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[Object(R.jsxs)("p",{style:{textAlign:"left",lineHeight:"1em"},children:[n("welcome.date"),Object(R.jsx)("br",{}),n("welcome.location")]}),Object(R.jsx)("h1",{style:{lineHeight:"1.1em"},children:n("welcome.line1")}),Object(R.jsx)("h1",{style:{lineHeight:"1.1em"},children:n("welcome.line2")})]}),Object(R.jsx)(E,{onPress:function(){return a(!0)},label:n("welcome.enterButton")})]}),Object(R.jsx)("div",{style:{height:"30vh",backgroundImage:"url('".concat(s[1],"')"),backgroundSize:"cover",backgroundPosition:"center"}})]})})},T="RSVP_AUTH",H=function(){var e=function(e){var t=Object(u.a)().t,n=Object(c.useState)({data:void 0,loading:!1,error:void 0}),o=Object(l.a)(n,2),i=o[0],r=o[1];return[function(n){return r({data:void 0,loading:!0,error:void 0}),fetch(e.url,{method:e.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return console.log("status",e.status),200===e.status?e.json():new Error(t("noInviteeFound"))})).then((function(t){return e.decoder.decode(t)})).then(b.c((function(e){return r({data:void 0,loading:!1,error:e[0].message||t("noInviteeFound")})}),(function(e){return r({data:e,loading:!1,error:void 0})}))).catch((function(e){return r((function(){return{error:e.toString(),loading:!1}}))}))},i]}(O),t=Object(l.a)(e,2),n=t[0],o=t[1],i=o.data,r=o.error,a=o.loading,s=Object(c.useState)(),d=Object(l.a)(s,2),g=d[0],j=d[1];return Object(c.useEffect)((function(){var e=window.localStorage.getItem(T);if(e)try{var t=JSON.parse(e);t.name&&n(t).then((function(){return j(t)}))}catch(c){console.log("failed to parse prev creds",c)}}),[]),Object(c.useEffect)((function(){console.log("seeing if the use4r data qualifies for storage",{data:i,error:r,loading:a,userData:g}),i&&!r&&!a&&g&&(console.log("it does"),window.localStorage.setItem(T,JSON.stringify(g)))}),[i,r,a,g]),{signIn:function(e){j({name:e.name.trim(),zip:e.zip.trim()}),n({name:e.name.trim(),zip:e.zip.trim()}).catch((function(){return console.log("sign in error"),"error loging in"}))},signOut:function(){window.localStorage.removeItem(T),j(void 0),window.location.reload()},results:e[1]}},q=function(e){var t=e.auth,n=Object(u.a)().t;return Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Dashboard"}),Object(R.jsx)("p",{children:n("userGreeting",{name:t.displayName})}),t.weddingAcceptedCount&&(t.weddingAcceptedCount?Object(R.jsx)("button",{children:n("dashboard.updateWeddingRsvpButton",{accepted:t.weddingAcceptedCount,declined:t.weddingDeclinedCount})}):Object(R.jsx)("button",{children:n("dashboard.setWeddingRsvpButton")}))]})};var G=function(){var e=H(),t=e.signIn,n=(e.signOut,e.results),c=n.data,o=n.loading,i=n.error;return Object(R.jsx)("div",{className:"App",children:c?Object(R.jsx)(q,{auth:c}):Object(R.jsx)(M,{onSubmit:function(e){return t(e)},submitting:o,error:i})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,275)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(R.jsx)(o.a.StrictMode,{children:Object(R.jsx)(G,{})}),document.getElementById("root")),U()}},[[271,1,2]]]);
//# sourceMappingURL=main.f2593de2.chunk.js.map